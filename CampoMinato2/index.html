<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homepage</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/settings.css">
    <script src="js/settings.js" defer></script>
    <link rel="icon" href="img/icon.ico">
</head>
<body>
    <header>
        <h1>Campo Minato 2.0<br><hr>Homepage</h1>
    </header>
    <div id="content">
        <h2>Benvenuto nella homepage di Campo Minato 2.0</h2>
        <div id="contenitore">
            <div id="div_gioca">
                <h3>Gioca subito!</h3>
                <p>Inizia una nuova partita cliccando qui sotto.<br>
                    Ricorda che puoi modificare le impostazioni di gioco qui a fianco.
                </p>
                <a href="game.html"><button><p>Gioca ora!</p></button></a>
            </div>
            <div id="div_impostazioni">
                <h3>Impostazioni di gioco</h3>
                <p>Modifica le impostazione per un esperienza di gioco migliore per te.<br>
                    Ricorda che il default Ã¨ un campo 12x12 con un 10% di mine.
                </p>
                <button id="settings"><p>Impostazioni</p></button>
            </div>
        </div>

        <div id="div_stats">
            <h2>ğŸ“Š Le tue statistiche</h2>
            <p>ğŸ® Partite giocate: <span id="s_giocate">0</span></p>
            <p>âœ… Vittorie: <span id="s_vinte">0</span></p>
            <p>âŒ Sconfitte: <span id="s_perse">0</span></p>
            <p>ğŸ“ˆ % Vittorie: <span id="s_perc">0%</span></p>
            <p>ğŸ”¥ Streak attuale: <span id="s_streak">0</span></p>
            <p>ğŸ† Streak migliore: <span id="s_best_streak">0</span></p>
            <button id="reset_stats">ğŸ—‘ï¸ Reset statistiche</button>
        </div>
        <script>
            document.querySelector("#s_giocate").textContent    = localStorage.getItem("stat_giocate")    || 0;
            document.querySelector("#s_vinte").textContent      = localStorage.getItem("stat_vinte")      || 0;
            document.querySelector("#s_perse").textContent      = localStorage.getItem("stat_perse")      || 0;
            const g = parseInt(localStorage.getItem("stat_giocate") || 0);
            const v = parseInt(localStorage.getItem("stat_vinte")   || 0);
            document.querySelector("#s_perc").textContent       = g > 0 ? Math.round(v / g * 100) + "%" : "0%";
            document.querySelector("#s_streak").textContent     = localStorage.getItem("stat_streak")     || 0;
            document.querySelector("#s_best_streak").textContent= localStorage.getItem("stat_best_streak")|| 0;

            document.querySelector("#reset_stats").addEventListener("click", () => {
                if (confirm("Sei sicuro di voler azzerare tutte le statistiche?")) {
                    ["stat_giocate","stat_vinte","stat_perse","stat_streak","stat_best_streak"]
                        .forEach(k => localStorage.removeItem(k));
                    location.reload();
                }
            });
        </script>
    </div>

    <footer>
        <p>Campo Minato 2.0 - Progetto di Programmazione Web<br>
            Creato da: Buongallino Alessandro<br>
            Tutti i diritti riservati &copy; 2026
        </p>
    </footer>
    <div id="background" class="hidden">
        <div id="settings_overlay">
            <div id="settings_content">
                <h2>Impostazioni di gioco</h2>

                <div id="preset_bar">
                    <button class="preset" data-rows="5"  data-cols="5"  data-percent="5">ğŸ˜Š Facile+</button>
                    <button class="preset" data-rows="9"  data-cols="9"  data-percent="10">ğŸ™‚ Facile</button>
                    <button class="preset" data-rows="12" data-cols="22" data-percent="15">ğŸ˜ Medio</button>
                    <button class="preset" data-rows="16" data-cols="30" data-percent="20">ğŸ˜¬ Difficile</button>
                    <button class="preset" data-rows="20" data-cols="40" data-percent="30">ğŸ˜ˆ Incubo</button>
                    <button class="preset" data-rows="30" data-cols="60" data-percent="40">ğŸ’€ Incubo+</button>
                </div>

                <label for="rows">Righe: <span id="rows_val">12</span></label>
                <input type="range" id="rows" name="rows" min="5" max="30" value="12"><br><br>

                <label for="cols">Colonne: <span id="cols_val">12</span></label>
                <input type="range" id="cols" name="cols" min="5" max="60" value="12"><br><br>

                <label for="mines">Percentuale mine: <span id="mines_val">10</span>%</label>
                <input type="range" id="mines" name="mines" min="5" max="40" value="10"><br><br>

                <label>
                    ğŸŒ™ Tema scuro
                    <label class="toggle-switch">
                        <input type="checkbox" id="dark_toggle">
                        <span class="toggle-slider"></span>
                    </label>
                </label><br><br>

                <button id="save_settings"><p>Salva impostazioni</p></button>
                <button id="close_settings"><p>Chiudi</p></button>
            </div>
        </div>
    </div>
    
</body>
</html>